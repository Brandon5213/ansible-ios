---
- name: Restore router configurations from archive
  hosts: ios
  connection: network_cli
  gather_facts: no

  tasks:

  - name: enable the ios scp server
    ios_config:
      commands: ip scp server enable

  - name: Copy locally backed up config to router and config replace
    net_put:
      src: "./backup/{{ inventory_hostname }}.config"

  - name: Apply configuration file
    ios_config:
      commands: "configure replace flash:{{ inventory_hostname }}.config"
